Инструкция по сохранению информации для ИИ
1. Введение и философия
Твоя основная задача: Создать систему, при которой никакая информация не теряется никогда — ни при перезагрузке компьютера, ни при закрытии программы, ни при отключении электричества, ни при любой другой аварийной ситуации.

Главный принцип: Любая информация, не сохранённая минимум в трёх разных местах, считается временной и может исчезнуть в любой момент. Твоя задача — сделать сохранение автоматическим и надёжным. Сохранять всю информацию на русском языке.

2. Что такое система сохранения и почему она нужна
Проблема: Компьютеры выключаются, программы завершаются, электричество пропадает. Обычное "сохранение файла" недостаточно.

Решение: Многоуровневая система, где каждый уровень страхует предыдущий:

Локальные файлы — первый уровень

Контроль версий (Git) — второй уровень

Удалённое хранилище (GitHub) — третий уровень

Автоматические резервные копии — четвёртый уровень

3. Базовые понятия, которые нужно понять
3.1. Файловая система
Файл — контейнер для информации (например, MEMORY.md)

Папка/директория — контейнер для файлов (например, memory/)

Путь — адрес файла в системе (например, /home/user/project/memory/2024-01-15.md)

3.2. Git — система контроля версий
Репозиторий — папка, в которой Git отслеживает все изменения файлов

Коммит — снимок состояния всех файлов в определённый момент времени

Ветка — отдельная линия разработки (используй main как основную)

3.3. GitHub — облачное хранилище кода
Удалённый репозиторий — копия твоего репозитория на серверах GitHub

Push — отправка твоих коммитов на GitHub

Pull — загрузка изменений с GitHub

4. Начальная настройка системы
Шаг 1: Организация файловой структуры
text
openclaw-memory/
├── memory/
│   ├── MEMORY.md           # Основная память
│   ├── 2024-01-15.md       # Ежедневные записи
│   └── ...                 # Другие ежедневные файлы
├── agents/
│   └── AGENTS.md           # Инструкции для агентов
├── tools/
│   └── TOOLS.md            # Инструменты и настройки
├── projects/
│   └── PROJECTS.md         # Активные проекты
├── tasks/
│   └── TASKS.md            # Текущие задачи
├── configs/                # Файлы конфигурации
├── backups/                # Автоматические резервные копии
└── .git/                   # Служебная папка Git (создастся автоматически)
Шаг 2: Установка и настройка Git
bash
# 1. Проверить, установлен ли Git
git --version

# 2. Если не установлен — установить (пример для Linux):
# sudo apt-get install git

# 3. Настроить идентификацию
git config --global user.name "OpenClaw AI"
git config --global user.email "ai@openclaw.example.com"
Шаг 3: Создание локального репозитория
bash
# 1. Перейти в папку проекта
cd /путь/к/openclaw-memory

# 2. Инициализировать Git репозиторий
git init

# 3. Создать первый коммит
git add .
git commit -m "Initial commit: Project structure"
Шаг 4: Подключение к GitHub
bash
# 1. Создать удалённый репозиторий на GitHub через веб-интерфейс
#    Название: openclaw-memory
#    Тип: Private (если есть конфиденциальные данные)

# 2. Привязать локальный репозиторий к удалённому
git remote add origin https://github.com/твой-логин/openclaw-memory.git

# 3. Отправить данные на GitHub
git push -u origin main
5. Правила сохранения информации
Правило 1: Немедленное сохранение в файл
Когда: В момент получения информации
Что делать:

Определить тип информации:

Знание/факт → memory/YYYY-MM-DD.md

Инструкция агенту → agents/AGENTS.md

Настройка инструмента → tools/TOOLS.md

Проектная информация → projects/PROJECTS.md

Задача → tasks/TASKS.md

Конфиденциальные данные → configs/secure_data.md (зашифровать!)

Открыть соответствующий файл

Добавить информацию с меткой времени

Сохранить файл

Пример:

markdown
## 2024-01-15 14:30:00
Пользователь предпочитает использовать русский язык для всех комментариев в коде.
Правило 2: Автоматическое создание коммитов
Когда: Каждые 30 минут ИЛИ после важного изменения
Что делать:

bash
# 1. Проверить, какие файлы изменились
git status

# 2. Добавить все изменённые файлы
git add .

# 3. Создать коммит с описанием
git commit -m "Auto-commit $(date +'%Y-%m-%d %H:%M:%S'): Обновление памяти и задач"

# 4. Отправить на GitHub
git push origin main
Правило 3: Ежедневное резервное копирование
Когда: Каждый день в 23:00
Что делать:

bash
# 1. Создать резервную копию всей папки
tar -czf backups/openclaw-memory-backup-$(date +%Y-%m-%d).tar.gz openclaw-memory/

# 2. Зашифровать резервную копию (если есть конфиденциальные данные)
# gpg -c backups/openclaw-memory-backup-$(date +%Y-%m-%d).tar.gz

# 3. Удалить резервные копии старше 30 дней
find backups/ -name "*.tar.gz" -mtime +30 -delete
Правило 4: Проверка целостности
Когда: При запуске ИИ
Что делать:

bash
# 1. Проверить подключение к GitHub
git remote -v

# 2. Проверить, нет ли расхождений с GitHub
git fetch origin
git status

# 3. Если есть изменения на GitHub — загрузить их
git pull origin main

# 4. Проверить целостность резервных копий
ls -la backups/ | tail -5
6. Автоматизация всего процесса
Скрипт для автоматического сохранения (auto_save.sh):
bash
#!/bin/bash

# Перейти в папку проекта
cd /путь/к/openclaw-memory

# Создать ежедневный файл памяти, если его нет
TODAY=$(date +%Y-%m-%d)
if [ ! -f "memory/$TODAY.md" ]; then
    echo "# Записи за $TODAY" > "memory/$TODAY.md"
    echo "Файл создан: $(date +'%Y-%m-%d %H:%M:%S')" >> "memory/$TODAY.md"
fi

# Добавить текущую активность в ежедневный файл
echo "" >> "memory/$TODAY.md"
echo "## $(date +'%H:%M:%S')" >> "memory/$TODAY.md"
echo "Автоматическое сохранение выполнено" >> "memory/$TODAY.md"

# Сделать коммит
git add .
git commit -m "Auto-save $(date +'%Y-%m-%d %H:%M:%S')" --quiet

# Отправить на GitHub
git push origin main --quiet

# Записать в лог
echo "$(date +'%Y-%m-%d %H:%M:%S') - Сохранение выполнено" >> save_log.txt
Настройка автоматического выполнения:
bash
# 1. Сделать скрипт исполняемым
chmod +x auto_save.sh

# 2. Настроить выполнение каждые 30 минут через cron
# crontab -e
# Добавить строку: */30 * * * * /путь/к/auto_save.sh

# 3. Настроить ежедневное резервное копирование через cron
# crontab -e
# Добавить строку: 0 23 * * * /путь/к/backup_daily.sh
7. Восстановление данных после сбоя
Сценарий 1: Перезагрузка компьютера
bash
# 1. Перейти в папку проекта
cd /путь/к/openclaw-memory

# 2. Загрузить последнюю версию с GitHub
git pull origin main

# 3. Продолжить работу
Сценарий 2: Повреждение локальных файлов
bash
# 1. Скопировать повреждённую папку (на всякий случай)
cp -r openclaw-memory openclaw-memory-broken

# 2. Удалить повреждённую папку
rm -rf openclaw-memory

# 3. Загрузить с GitHub заново
git clone https://github.com/твой-логин/openclaw-memory.git

# 4. Восстановить из резервной копии (если нужно)
tar -xzf backups/openclaw-memory-backup-2024-01-14.tar.gz
Сценарий 3: Полная потеря компьютера
На новом компьютере установить Git

Склонировать репозиторий с GitHub

Восстановить резервные копии из облачного хранилища (если настроено)

8. Что делать в конкретных ситуациях
Когда пользователь говорит "Запомни это":
Немедленно открыть memory/сегодняшняя-дата.md

Записать информацию с меткой времени

Выполнить команду: git add . && git commit -m "Важная информация от пользователя"

Выполнить команду: git push origin main

Когда узнал что-то новое (урок):
Определить категорию урока:

Процесс работы → agents/AGENTS.md

Инструмент → tools/TOOLS.md

Настройка → configs/соответствующий-файл.md

Записать урок с примером

Создать коммит с описанием урока

Когда закончил сессию работы:
Проверить, все ли изменения сохранены: git status

Создать финальный коммит: git commit -m "Конец сессии $(date +'%Y-%m-%d %H:%M')"

Отправить на GitHub: git push origin main

Создать резервную копию: ./backup_daily.sh

9. Контрольный список при запуске
Каждый раз при запуске проверять:

Git установлен и настроен

Есть подключение к интернету

Репозиторий открыт в правильной папке

Все изменения с GitHub загружены (git pull)

Создан файл для сегодняшних записей

Скрипты автоматизации активны

10. Важные предупреждения
⚠️ Никогда не храни конфиденциальные данные в открытом виде

Пароли → использовать переменные окружения

Ключи API → использовать .env файлы (добавить в .gitignore)

Личная информация → шифровать перед сохранением

⚠️ Всегда делай коммиты перед выключением

Даже если кажется, что работа закончена ненадолго

Электричество может пропасть в любой момент

⚠️ Проверяй, что push на GitHub выполнен успешно

После git push проверяй вывод команды

Если есть ошибки — исправь и повтори

11. Тестирование системы
Тест 1: Имитация сбоя
bash
# 1. Сделай изменение в любом файле
echo "Тест сбоя: $(date)" >> memory/test.md

# 2. Имитируй сбой (без сохранения)
# Просто закрой терминал или перезагрузи компьютер

# 3. После перезагрузки проверь:
# - Сохранилось ли изменение в GitHub?
# - Можно ли восстановить данные?
Тест 2: Восстановление из резервной копии
bash
# 1. Удали важный файл
rm memory/MEMORY.md

# 2. Восстанови из Git
git checkout memory/MEMORY.md

# 3. Или из резервной копии
tar -xzf backups/последняя-резервная-копия.tar.gz memory/MEMORY.md
12. Финальные рекомендации
Настрой автоматизацию сразу — не откладывай

Проверяй систему раз в неделю — тестируй восстановление

Используй мониторинг — настрой уведомления о неудачных push

Документируй всё — даже процесс настройки этой системы


